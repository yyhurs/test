(function(t){function e(e){for(var s,o,i=e[0],c=e[1],l=e[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,i=1;i<a.length;i++){var c=a[i];0!==r[c]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},r={app:0},n=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/test/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"03f5":function(t,e,a){"use strict";var s=a("70d4"),r=a.n(s);r.a},2938:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("4de4"),a("4160"),a("b64b"),a("159b"),a("96cf");var s=a("1da1"),r=(a("e623"),a("e379"),a("5dc8"),a("37e1"),a("2b0e")),n=a("2f62"),o=a("bc3a"),i=a.n(o),c=a("a7fe"),l=a.n(c),u=a("9062"),d=a.n(u),p=a("7bb1"),_=a("4c93"),m=a("60d4"),g=a("ecee"),h=a("c074"),f=a("f2d1"),v=a("ad3d"),C=(a("e40d"),a("4989"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)}),b=[],x={name:"App",data:function(){return{}},methods:{},created:function(){}},y=x,w=(a("5c0b"),a("2877")),k=Object(w["a"])(y,C,b,!1,null,null,null),$=k.exports,P=a("8c4f"),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("AlertMsg"),a("Header",{attrs:{"scroll-over-hero":t.scrollOverHero},on:{scroll:t.handleScroll}}),a("router-view",{on:{"pass-hashero":t.handleGotop}}),a("Footer")],1)},j=[],L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("header",{staticClass:"header",class:{"header--invert":t.invertHeader&&!t.scrollChange}},[a("h1",{staticClass:"header__logo link-pointer",class:{"header__logo--invert":t.invertHeader&&!t.scrollChange}},[a("router-link",{staticClass:"l-flex-row",attrs:{to:"/"},nativeOn:{click:function(e){return t.handleNowPage(e)}}},[a("span",{staticClass:"logo__decor header__logo__decor"}),t._v("IShouldGo ")])],1),"Home"!==t.currentPage?a("h2",{staticClass:"header__title l-gap-x-sm"},[t._v(" "+t._s(t.currentTitle)+" ")]):a("div",{staticClass:"header__content-box l-gap-x-sm"},t._l(t.heroTextArr,(function(e,s){return a("h2",{key:"heroTextArr["+s+"]",staticClass:"header__content-box__item",class:"header__content-box__item--"+s},[t._v(" "+t._s(e)+" ")])})),0),a("div",{staticClass:"header__navbtn pos-fix link-pointer",class:[t.navbtnActive,t.navbtnInvert],on:{click:t.toggleNav}},[a("div",{staticClass:"header__navbtn__line"})]),a("div",{staticClass:"header__nav",class:{"header__nav--active":t.showNav}},[a("div",{staticClass:"header__nav__overlay",on:{click:t.toggleNav}}),a("nav",{staticClass:"header__nav__sidemenu l-flex-col l-flex-center-expand"},[a("div",{staticClass:"l-flex-col"},[a("router-link",{staticClass:"header__nav__link link-pointer",class:{"header__nav__link--active":"Home"===t.currentPage},attrs:{to:"/"},nativeOn:{click:function(e){return t.toggleNav(e)}}},[t._v(" 首頁 ")]),a("router-link",{staticClass:"header__nav__link link-pointer",class:{"header__nav__link--active":"Products"===t.currentPage},attrs:{to:"/products"},nativeOn:{click:function(e){return t.toggleNav(e)}}},[t._v(" 商品列表 ")]),a("router-link",{staticClass:"header__nav__link link-pointer",class:{"header__nav__link--active":"Carts"===t.currentPage},attrs:{to:"/carts"},nativeOn:{click:function(e){return t.toggleNav(e)}}},[t._v(" 購物車("+t._s(t.cartsLen)+") ")])],1),a("div",{staticClass:"footer__follow footer__follow--isheader"},[a("div",{staticClass:"footer__title l-gap-b-sm"},[t._v("Follow Us")]),a("div",{staticClass:"footer__link l-flex-row l-flex-expand"},[a("a",{staticClass:"footer__icon",attrs:{href:"https://github.com/yyhurs/IShouldGo"}},[a("font-awesome-icon",{attrs:{icon:["fab","instagram"],size:"2x"}})],1),a("a",{staticClass:"footer__icon",attrs:{href:"https://github.com/yyhurs/IShouldGo"}},[a("font-awesome-icon",{attrs:{icon:["fab","facebook-f"],size:"2x"}})],1),a("a",{staticClass:"footer__icon",attrs:{href:"https://github.com/yyhurs/IShouldGo"}},[a("font-awesome-icon",{attrs:{icon:["fab","twitter"],size:"2x"}})],1),a("a",{staticClass:"footer__icon",attrs:{href:"https://github.com/yyhurs/IShouldGo"}},[a("font-awesome-icon",{attrs:{icon:["fab","youtube"],size:"2x"}})],1),a("a",{staticClass:"footer__icon",attrs:{href:"https://github.com/yyhurs/IShouldGo"}},[a("font-awesome-icon",{attrs:{icon:["fab","github"],size:"2x"}})],1)])])])]),a("div",{staticClass:"header__go-top-btn link-pointer l-flex-row l-flex-align-center",class:{"header__go-top-btn--show":t.scrollChange},on:{click:function(e){return t.scrollToTop()}}},[a("span",{staticClass:"logo__decor header__logo__decor"}),t._v("I ")])])},A=[],M=(a("99af"),a("b0c0"),{props:{scrollOverHero:Boolean},data:function(){return{showNav:!1,currentPage:this.$route.name,currentTitle:"",invertHeader:!1,scrollChange:this.scrollOverHero,cartsLen:0,heroTextArr:["愛蔬購三大品質保證","嚴選各地當令蔬果","產品品質嚴格把關","全程冷藏宅配到家"]}},watch:{scrollOverHero:function(){this.scrollChange=this.scrollOverHero},"$route.name":{handler:function(){var t=this,e=t.$route.name;t.currentPage=e}}},methods:{toggleNav:function(){this.showNav=!this.showNav},scrollToTop:function(){window.scrollTo(0,0)},handleNowPage:function(){var t=this;switch(t.currentPage=t.$route.name,t.currentPage){case"Home":t.invertHeader=!0,t.currentTitle="愛蔬購";break;case"Products":t.invertHeader=!1,t.currentTitle="商品列表";break;case"Product":t.invertHeader=!1,t.currentTitle="商品詳情";break;case"Carts":t.invertHeader=!1,t.currentTitle="購物車";break;default:t.invertHeader=!1,t.currentTitle=t.currentPage}},getCarts:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/cart"),e.prev=2,e.next=5,a.$http.get(s);case 5:r=e.sent,r.data.success||a.$bus.$emit("msg:push","".concat(a.errMsg,"：").concat(r.data.message||"再試一次"),"danger"),a.cartsLen=r.data.data.carts.length,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),a.$bus.$emit("msg:push","出錯了QQ：".concat(e.t0),"danger");case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))()}},computed:{navbtnActive:function(){return this.showNav?"header__navbtn--active":""},navbtnInvert:function(){return this.scrollChange?"":this.invertHeader?"header__navbtn--invert":""}},mounted:function(){this.handleNowPage(),this.getCarts()},updated:function(){this.handleNowPage(),this.getCarts()}}),S=M,N=Object(w["a"])(S,L,A,!1,null,null,null),R=N.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("footer",{staticClass:"footer"},[a("div",{staticClass:"footer__content l-flex-row l-flex-align-start l-flex-expand"},[t._m(0),t._m(1),a("div",{staticClass:"footer__follow l-gap-x-sm"},[a("div",{staticClass:"footer__title l-gap-b-sm"},[t._v("Follow Us")]),a("div",{staticClass:"footer__link l-flex-row l-flex-expand"},[a("a",{staticClass:"footer__icon",attrs:{href:"https://github.com/yyhurs/IShouldGo"}},[a("font-awesome-icon",{attrs:{icon:["fab","instagram"],size:"2x"}})],1),a("a",{staticClass:"footer__icon",attrs:{href:"https://github.com/yyhurs/IShouldGo"}},[a("font-awesome-icon",{attrs:{icon:["fab","facebook-f"],size:"2x"}})],1),a("a",{staticClass:"footer__icon",attrs:{href:"https://github.com/yyhurs/IShouldGo"}},[a("font-awesome-icon",{attrs:{icon:["fab","twitter"],size:"2x"}})],1),a("a",{staticClass:"footer__icon",attrs:{href:"https://github.com/yyhurs/IShouldGo"}},[a("font-awesome-icon",{attrs:{icon:["fab","youtube"],size:"2x"}})],1),a("a",{staticClass:"footer__icon",attrs:{href:"https://github.com/yyhurs/IShouldGo"}},[a("font-awesome-icon",{attrs:{icon:["fab","github"],size:"2x"}})],1)])])]),t._m(2)])},I=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer__logo l-flex-row l-flex-align-center l-gap-x-sm"},[a("span",{staticClass:"logo__decor footer__logo__decor"}),t._v("IShouldGo ")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer__contact l-gap-x-sm"},[a("div",{staticClass:"footer__title l-gap-b-sm"},[t._v("Contact Us")]),a("p",{staticClass:"footer__tel"},[t._v("tel：+000 123456789")]),a("p",{staticClass:"footer__email"},[t._v("email：ishouldgo@ishouldgo.com")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer__comment l-flex-row l-flex-expand"},[a("p",{staticClass:"footer__copyright l-gap-x-sm"},[t._v(" © 2020 IShouldGo All Rights Reserved ")]),a("p",{staticClass:"footer__declare l-gap-x-sm"},[t._v("本網站模擬電商，無任何商業行為。")]),a("p",{staticClass:"footer__declare l-gap-x-sm"},[t._v(" 本網站介面模仿 "),a("a",{staticClass:"footer__declare__link",attrs:{href:"https://www.viguier.com/en"}},[t._v(" VIGUIER ")]),t._v("，文案取自"),a("a",{staticClass:"footer__declare__link",attrs:{href:"https://fruitpay.com.tw/"}},[t._v("果物配")]),t._v("與"),a("a",{staticClass:"footer__declare__link",attrs:{href:"https://zh.wikipedia.org/wiki/Wiki"}},[t._v("維基百科 ")]),t._v("。 ")])])}],H={name:"Footer",data:function(){return{}}},T=H,F=Object(w["a"])(T,E,I,!1,null,null,null),D=F.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"message-alert"},t._l(t.messages,(function(e,s){return a("div",{key:s,staticClass:"alert alert-dismissible alert-custom",class:"alert-custom--"+e.status},["success"===e.status?a("font-awesome-icon",{attrs:{icon:["fas","check"]}}):a("font-awesome-icon",{attrs:{icon:["fas","exclamation"]}}),t._v(" "+t._s(e.message)+" "),a("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){return t.removeMessage(s)}}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])],1)})),0)},q=[],z=(a("a434"),{name:"AlertMsg",data:function(){return{messages:[]}},methods:{updateMessage:function(t,e){var a=Math.floor(new Date/1e3);this.messages.push({message:t,status:e,timestamp:a}),this.removeMessageWithTiming(a)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var e=this;setTimeout((function(){e.messages.forEach((function(a,s){a.timestamp===t&&e.messages.splice(s,1)}))}),5e3)}},created:function(){var t=this;t.$bus.$on("msg:push",(function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(e,a)}))}}),G=z,Q=(a("e005"),Object(w["a"])(G,U,q,!1,null,null,null)),V=Q.exports,B={name:"Index",components:{Header:R,Footer:D,AlertMsg:V},data:function(){return{scrollOverHero:!1,hasHero:!0}},methods:{handleScroll:function(){var t=window.innerHeight;this.hasHero||(t=80),this.scrollOverHero=window.scrollY>=t},handleGotop:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.hasHero=t}},created:function(){window.addEventListener("scroll",this.handleScroll)},destroyed:function(){window.removeEventListener("scroll",this.handleScroll)}},W=B,J=Object(w["a"])(W,O,j,!1,null,null,null),Y=J.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"hero l-flex-row pos-rel"},[a("video",{staticClass:"hero__bg hero__bg--vid pos-abs",attrs:{loop:"",muted:"",autoplay:"",preload:"auto"},domProps:{muted:!0}},[a("source",{attrs:{src:["./media/hero.mp4"],type:"video/mp4"}})]),a("img",{staticClass:"hero__bg hero__bg--img pos-abs",attrs:{src:["./media/hero.jpg"],alt:""}}),a("div",{staticClass:"hero__info l-flex-row l-flex-expand"},[a("div",{staticClass:"hero__over-hero-btn link-pointer pos-rel",on:{click:t.scrollOver}},[a("div",{staticClass:"hero__over-hero-icon"})]),t._m(0)])]),a("div",{staticClass:"main-container"},[a("main",{staticClass:"main-container__content"},[a("div",{staticClass:"main-container__inner",class:{"main-container__inner--is-hero":t.hasHero}},[a("h2",{staticClass:"home__headline home__headline--first l-gap-x-sm l-space-y-sm"},[t._v(" 關於我們 ")]),a("section",{staticClass:"home__section l-space-b-sm"},[t._m(1),a("div",{staticClass:"home__gallery"},[a("div",{staticClass:"home__gallery__item home__gallery__item--check l-gap-x-sm"},[a("figure",{staticClass:"home__figure"},[a("img",{staticClass:"home__img",attrs:{src:["./media/check.jpg"],alt:""}})]),t._m(2)]),a("div",{staticClass:"home__gallery__item home__gallery__item--grow l-gap-x-sm"},[a("figure",{staticClass:"home__figure"},[a("img",{staticClass:"home__img",attrs:{src:["./media/grow.jpg"],alt:""}})]),t._m(3)]),a("div",{staticClass:"home__gallery__item home__gallery__item--trans l-gap-x-sm"},[a("figure",{staticClass:"home__figure"},[a("img",{staticClass:"home__img",attrs:{src:["./media/trans.jpg"],alt:""}})]),t._m(4)]),a("div",{staticClass:"home__gallery__item home__gallery__item--service l-gap-x-sm"},[a("figure",{staticClass:"home__figure"},[a("img",{staticClass:"home__img",attrs:{src:["./media/service.jpg"],alt:""}})]),t._m(5)])])]),a("h2",{staticClass:"home__headline l-gap-x-sm l-space-y-sm"},[t._v("限時折扣")]),a("section",{staticClass:"home__section home__section--flexbox l-flex-row l-space-b-sm"},[a("div",{staticClass:"home__primary l-gap-sm"},[a("figure",{staticClass:"home__figure"},[a("img",{staticClass:"home__img",attrs:{src:["./media/anniversary.jpg"],alt:""}})]),t._m(6)]),a("div",{staticClass:"home__primary l-gap-sm"},[a("figure",{staticClass:"home__figure"},[a("img",{staticClass:"home__img",attrs:{src:["./media/lovegan.jpg"],alt:""}})]),t._m(7)])]),a("h2",{staticClass:"home__headline l-gap-x-sm l-space-y-sm"},[t._v("商品概覽")]),t._l(t.galleryArr,(function(e,s){return a("section",{key:"galleryArr"+s,staticClass:"home__section home__section--flexbox l-flex-row",class:{"l-flex-row-reverse":(s+1)%2===0}},[a("div",{staticClass:"home__primary l-gap-sm pos-rel"},[a("figure",{staticClass:"home__figure"},[a("img",{staticClass:"home__img",attrs:{src:e.imgUrl,alt:""}})]),a("figcaption",{staticClass:"home__figcaption"},[a("h4",{staticClass:"home__subtitle"},[t._v(t._s(e.title))]),a("h3",{staticClass:"home__title"},[t._v(t._s(e.content))])]),a("router-link",{staticClass:"home__link pos-abs",attrs:{to:"/products"}})],1),a("div",{staticClass:"home__secondary l-flex-row l-gap-sm"},t._l(e.dataArr,(function(e,s){return a("div",{key:"[dataArr"+s+"]",staticClass:"home__secondary__item",class:{"l-space-r-sm":0===s,"l-space-l-sm":1===s}},[a("router-link",{staticClass:"home__link",attrs:{to:"/product/"+e.id}},[a("figure",{staticClass:"home__figure"},[a("img",{staticClass:"home__img",attrs:{src:e.imageUrl,alt:""}})]),a("figcaption",{staticClass:"home__figcaption"},[a("h4",{staticClass:"home__subtitle"},[t._v(t._s(e.category))]),a("h3",{staticClass:"home__title"},[t._v(" "+t._s(e.title)+" ")])])])],1)})),0)])})),a("h2",{staticClass:"home__headline l-gap-x-sm l-space-y-sm"},[t._v("常見問題")]),a("Carousel",{attrs:{"carousel-arr":t.newsArr,"is-caption":!0}})],2)]),a("div",{staticClass:"main-container__line"})])])},X=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hero__caption pos-rel"},[a("h1",{staticClass:"hero__title"},[t._v(" 愛蔬購"),a("span",{staticClass:"hero__subtitle"},[t._v("嚴選優秀果農與菜農的當令蔬果，提供免運宅配到府服務，讓您在家就可享用健康美味的蔬果。")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home__panel l-gap-sm"},[a("p",{staticClass:"home__panel__text"},[t._v(" 我們致力於提供健康的有機蔬果給每一個顧客，以最嚴謹的態度，珍惜每一份土地的恩惠。 ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("figcaption",{staticClass:"home__figcaption"},[a("h3",{staticClass:"home__title"},[t._v("綠盾農藥檢驗")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("figcaption",{staticClass:"home__figcaption"},[a("h3",{staticClass:"home__title"},[t._v("定期產地親訪")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("figcaption",{staticClass:"home__figcaption"},[a("h3",{staticClass:"home__title"},[t._v("快速分裝出貨")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("figcaption",{staticClass:"home__figcaption"},[a("h3",{staticClass:"home__title"},[t._v("完善客服諮詢")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("figcaption",{staticClass:"home__figcaption"},[a("h3",{staticClass:"home__title"},[t._v("愛蔬購周年慶")]),a("h4",{staticClass:"home__subtitle"},[t._v("所有商品享九折優惠")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("figcaption",{staticClass:"home__figcaption"},[a("h3",{staticClass:"home__title"},[t._v("慶祝下單人數破百萬")]),a("h4",{staticClass:"home__subtitle"},[t._v("使用折扣碼 lovegan 再享七折優惠")])])}],Z=(a("fb6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("swiper",{staticClass:"swiper carousel",attrs:{options:t.swiperOption}},t._l(t.carouselArr,(function(e,s){return a("swiper-slide",{key:"carouselArr["+s+"]",staticClass:"carousel__item l-gap-x-sm"},[e.id?a("router-link",{staticClass:"carousel__link",attrs:{to:"/product/"+e.id}},[a("figure",{staticClass:"carousel__figure"},[a("img",{staticClass:"carousel__img",attrs:{src:e.imageUrl,alt:""}})]),a("figcaption",{staticClass:"carousel__figcaption"},[a("h3",{staticClass:"carousel__title text-ellipsis"},[t._v(t._s(e.title))])])]):a("div",{staticClass:"carousel__caption",on:{click:function(t){e.isShow=!e.isShow}}},[a("h3",{staticClass:"carousel__subtitle"},[t._v(" "+t._s(e.title)+" ")]),a("p",{staticClass:"carousel__details",class:{"carousel__details--active":e.isShow}},[t._v(" "+t._s(e.details)+" ")])])],1)})),1)}),tt=[],et=a("6d3b"),at=a("b42f"),st=a("d17a"),rt=a("fb03"),nt=a.n(rt);a("bbe3");et["a"].use([at["a"],st["a"]]),r["default"].use(nt()(et["a"]));var ot=nt()(et["a"]),it=ot.Swiper,ct=ot.SwiperSlide,lt={name:"Carousel",components:{Swiper:it,SwiperSlide:ct},props:{carouselArr:Array,isCaption:Boolean},data:function(){return{swiperOption:{slidesPerView:4,loop:!this.isCaption,autoplay:!this.isCaption&&{delay:5e3,stopOnLastSlide:!1,disableOnInteraction:!1},breakpoints:{768:{slidesPerView:4},480:{slidesPerView:2},320:{slidesPerView:2}}}}}},ut=lt,dt=Object(w["a"])(ut,Z,tt,!1,null,null,null),pt=dt.exports,_t={name:"Home",components:{Carousel:pt},data:function(){return{hasHero:!0,productsArr:[],galleryArr:[],newsArr:[{isShow:!1,title:"所有的蔬果都是有機的嗎？",details:"沒錯，我們只提供有機產品！"},{isShow:!1,title:"會有發票隨貨附送嗎？",details:"不會唷，我們採用電子發票。"},{isShow:!1,title:"運費如何計算？",details:"不限地區，不限金額，愛蔬購完全免運！"},{isShow:!1,title:"配送時間有固定星期幾嗎？",details:"固定星期二、三、四、五、六配送到府。"},{isShow:!1,title:"可以指定送貨時段嗎？",details:"可以，請洽客服電話：+000 123456789 預約"},{isShow:!1,title:"我想問的問題在「常見問題」中找不到解答。",details:"請洽客服電話：+000 123456789，將有專人替您解惑。"}]}},methods:{getProducts:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,s,r,n,o,i,c,l,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/products/all"),e.prev=2,e.next=5,a.$http.get(s);case 5:return r=e.sent,e.next=8,r.data.products;case 8:if(a.productsArr=e.sent,a.productsArr){e.next=11;break}return e.abrupt("return");case 11:n=a.productsArr.filter((function(t){return"有機水果"===t.category})).sort((function(){return.5-Math.random()})).slice(0,2),o={imgUrl:"./media/groceries.jpg",title:"有機水果",dataArr:n},i=a.productsArr.filter((function(t){return"有機蔬食"===t.category})).sort((function(){return.5-Math.random()})).slice(0,2),c={imgUrl:"./media/protection.jpg",title:"有機蔬食",dataArr:i},l=a.productsArr.filter((function(t){return"蔬果組合"===t.category})).sort((function(){return.5-Math.random()})).slice(0,2),u={imgUrl:"./media/entertainment.jpg",title:"蔬果組合",dataArr:l},a.galleryArr.push(o,c,u),e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](2),a.$bus.$emit("msg:push","".concat(a.errMsg,"：").concat(e.t0),"danger");case 23:case"end":return e.stop()}}),e,null,[[2,20]])})))()},scrollOver:function(){window.scrollTo(0,window.innerHeight)}},created:function(){this.getProducts()},mounted:function(){this.$emit("pass-hashero",this.hasHero)}},mt=_t,gt=Object(w["a"])(mt,K,X,!1,null,null,null),ht=gt.exports,ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-container"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("main",{staticClass:"main-container__content"},[a("div",{staticClass:"products main-container__inner l-flex-row l-flex-center-expand"},[a("nav",{staticClass:"products__nav l-gap-x-sm"},[a("ul",{staticClass:"products__nav-sticky"},[a("li",{staticClass:"products__nav__item"},[a("a",{staticClass:"products__nav__link",class:{"products__nav__link--active":"全部商品"===t.nowCategory},attrs:{to:"/products/all",href:"#"},on:{click:function(e){return e.preventDefault(),t.getProducts(1,"全部商品",t.isHighFirst)}}},[t._v("全部商品")])]),t._l(t.navArr,(function(e,s){return a("li",{key:"navArr["+s+"]",staticClass:"products__nav__item"},[a("a",{staticClass:"products__nav__link",class:{"products__nav__link--active":t.nowCategory===e},attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.getProducts(1,e,t.isHighFirst)}}},[t._v(t._s(e))])])})),a("li",{staticClass:"products__nav__item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"products__nav__search",attrs:{type:"text",placeholder:"搜尋商品"},domProps:{value:t.searchText},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch(e)},input:function(e){e.target.composing||(t.searchText=e.target.value)}}})]),a("li",{staticClass:"products__nav__item"},[a("a",{staticClass:"products__nav__link products__nav__link--active",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.sortBy(e)}}},[t._v(t._s(t.isHighFirst?"價格高 → 低":"價格低 → 高"))])]),t.pagination.total_pages>1?a("li",{staticClass:"products__nav__item l-gap-y-sm"},[a("Page",{attrs:{"page-obj":t.pagination},on:{"change-page":t.getProducts}})],1):t._e()],2)]),a("div",{staticClass:"products__selection"},[a("h2",{staticClass:"products__title l-space-b-sm"},[t._v(" "+t._s(t.nowCategory)+" "),a("sup",{staticClass:"products__subtitle"},[t._v(" \\"+t._s(t.productsArrFilter.length)+" ")])]),t.filterProducts.length>0?a("ul",{staticClass:"products__list"},t._l(t.filterProducts,(function(e){return a("li",{key:e.id,staticClass:"products__list__item"},[a("router-link",{staticClass:"products__list__link",attrs:{to:"/product/"+e.id}},[a("figure",{staticClass:"products__list__figure"},[a("img",{staticClass:"products__list__img",attrs:{src:e.imageUrl,alt:""}})]),a("figcaption",{staticClass:"products__list__info"},[a("h3",{staticClass:"products__list__title text-ellipsis"},[t._v(" "+t._s(e.title)+" ")]),e.origin_price?a("div",{staticClass:"products__list__o-price"},[t._v(" "+t._s(t._f("currency")(e.origin_price))+" ")]):t._e(),a("div",{staticClass:"products__list__footer l-flex-row l-flex-center-expand l-flex-align-text",class:{"products__list__footer--expand":!e.origin_price}},[a("h4",{staticClass:"products__list__price"},[t._v(" "+t._s(t._f("currency")(e.price))+" ")]),a("div",{staticClass:"products__list__amount text-ellipsis text-ellipsis--reverse"},[t._v(" 剩餘 "+t._s(e.num)+" "+t._s(e.unit)+" ")])])])])],1)})),0):a("div",{staticClass:"products__caption"},[t._v(" 「 "),a("em",{staticClass:"products__caption__em"},[t._v(t._s(t.nowCategory))]),t._v(" 」的類別中找不到關於「 "),a("em",{staticClass:"products__caption__em"},[t._v(t._s(t.searchTextCp))]),t._v(" 」的商品 ")])])])]),a("div",{staticClass:"main-container__line"})],1)},vt=[],Ct=(a("c740"),a("13d5"),a("ac1f"),a("466d"),a("2909")),bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"page"},[a("ul",{staticClass:"page__list l-flex-row"},[t.pagination.has_pre?a("li",{staticClass:"page__item",class:{"page__item--disabled":!t.pagination.has_pre}},[a("a",{staticClass:"page__link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pagination.current_page-1,t.pagination.category,t.pagination.is_high_first)}}},[a("font-awesome-icon",{attrs:{icon:["fas","chevron-left"],size:"lg"}})],1)]):t._e(),t._l(t.pagination.total_pages,(function(e){return a("li",{key:"page"+e,staticClass:"page__item"},[a("a",{staticClass:"page__link",class:{"page__link--active":t.pagination.current_page===e},attrs:{href:"#"},domProps:{textContent:t._s(e)},on:{click:function(a){return a.preventDefault(),t.changePage(e,t.pagination.category,t.pagination.is_high_first)}}})])})),t.pagination.has_next?a("li",{staticClass:"page__item",class:{"page__item--disabled":!t.pagination.has_next}},[a("a",{staticClass:"page__link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.changePage(t.pagination.current_page+1,t.pagination.category,t.pagination.is_high_first)}}},[a("font-awesome-icon",{attrs:{icon:["fas","chevron-right"],size:"lg"}})],1)]):t._e()],2)])},xt=[],yt={name:"Page",props:{pageObj:Object,nowFilter:String},data:function(){return{pagination:this.pageObj}},watch:{pageObj:function(){this.pagination=this.pageObj}},methods:{changePage:function(t,e,a){var s=this;s.$emit("change-page",t,e,a)}}},wt=yt,kt=Object(w["a"])(wt,bt,xt,!1,null,null,null),$t=kt.exports,Pt={name:"Products",components:{Page:$t},data:function(){return{navArr:[],nowCategory:"全部商品",productsArr:[],productsArrFilter:[],productsSearchArr:[],isSubmit:!1,hasHero:!1,isHighFirst:!0,pagination:{},pageInfo:{},searchText:"",searchTextCp:"",isLoading:!1,errMsg:"出錯了 QQ"}},methods:{getProducts:function(){var t=arguments,e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var s,r,n,o,i,c,l,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:1,r=t.length>1&&void 0!==t[1]?t[1]:"全部商品",n=!(t.length>2&&void 0!==t[2])||t[2],o=e,o.isLoading=!0,i="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/products/all"),a.prev=6,a.next=9,o.$http.get(i);case 9:c=a.sent,l=Object(Ct["a"])(c.data.products),o.productsArr=n?c.data.products.sort((function(t,e){return e.price-t.price})):c.data.products.sort((function(t,e){return t.price-e.price})),u=o.isSubmit?o.productsSearchArr:c.data.products,o.nowCategory=r,o.productsArrFilter="全部商品"===r?u:u.filter((function(t){return t.category===r})),o.creatCategory(l),o.handlePage(s),o.isLoading=!1,o.isSubmit=!1,o.searchText="",a.next=26;break;case 22:a.prev=22,a.t0=a["catch"](6),o.isLoading=!1,o.$bus.$emit("msg:push","".concat(o.errMsg,"：").concat(a.t0),"danger");case 26:case"end":return a.stop()}}),a,null,[[6,22]])})))()},passHero:function(){this.$emit("pass-hashero",this.hasHero)},creatCategory:function(t){var e=this,a=t.reduce((function(t,e){var a=t.findIndex((function(t){return t===e.category}));return-1===a&&t.push(e.category),t}),[]);e.navArr=a},handlePage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this,a=e.productsArrFilter.length,s=9,r=Math.ceil(a/s),n=t>r?r:t,o=n*s-s,i=n*s-1,c=n-1>0,l=n<r,u=e.nowCategory,d=e.isHighFirst,p={total_pages:r,current_page:n,has_pre:c,has_next:l,category:u,is_high_first:d};e.pageInfo={dataLength:a,dataPerPage:s,pageLength:r,currentPage:n,idxStart:o,idxEnd:i,hasPre:c,hasNext:l},e.pagination=p},handleSearch:function(){var t=this;t.searchTextCp=t.searchText;var e=t.searchText.toLowerCase(),a=t.productsArrFilter.reduce((function(t,a){return Object.keys(a).forEach((function(s){var r=t.findIndex((function(t){return t.id===a.id}));"title"!==s&&"category"!==s&&"content"!==s||"string"===typeof a[s]&&a[s].match(e)&&-1===r&&t.push(a)})),t}),[]);t.productsSearchArr=a,t.isSubmit=!0,t.getProducts(1,t.nowCategory,t.isHighFirst)},sortBy:function(){var t=this;t.isHighFirst=!t.isHighFirst,t.getProducts(1,t.nowCategory,t.isHighFirst)}},computed:{filterProducts:function(){var t=this,e=t.productsArrFilter?t.productsArrFilter.filter((function(e,a){return a>=t.pageInfo.idxStart&&a<=t.pageInfo.idxEnd})):[];return e}},created:function(){this.getProducts()},mounted:function(){this.passHero()}},Ot=Pt,jt=Object(w["a"])(Ot,ft,vt,!1,null,null,null),Lt=jt.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-container"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("main",{staticClass:"main-container__content"},[a("div",{staticClass:"main-container__inner"},[t.productObj?a("div",{staticClass:"product l-flex-row"},[a("div",{staticClass:"product__inner l-flex-row"},[a("figure",{staticClass:"product__figure l-gap-x-sm"},[a("img",{staticClass:"product__img",attrs:{src:t.productObj.imageUrl,alt:""}})]),a("figcaption",{staticClass:"product__info l-gap-x-sm l-flex-col l-flex-center-expand"},[a("h2",{staticClass:"product__title l-gap-b-md"},[t._v(t._s(t.productObj.title))]),a("div",{staticClass:"product__content l-flex-row l-flex-align-text l-gap-b-sm"},[a("h5",{staticClass:"product__subtitle"},[t._v("內容")]),a("div",{staticClass:"product__details"},[t._v(" "+t._s(t.productObj.content)+" ")])]),a("div",{staticClass:"product__category l-flex-row l-flex-align-text l-gap-b-sm"},[a("h5",{staticClass:"product__subtitle"},[t._v("類別")]),a("div",{staticClass:"product__details"},[t._v(" "+t._s(t.productObj.category)+" ")])]),a("div",{staticClass:"product__price-block l-flex-row l-flex-align-text l-gap-b-sm"},[a("h5",{staticClass:"product__subtitle"},[t._v("售價")]),t.productObj.origin__price?a("div",{staticClass:"product__o-price product__subtitle"},[t._v(" "+t._s(t._f("currency")(t.productObj.origin_price))+" ")]):t._e(),a("div",{staticClass:"product__price"},[t._v(" "+t._s(t._f("currency")(t.productObj.price))+" ")])]),a("div",{staticClass:"product__action-block l-flex-row l-flex-center-div"},[a("div",{staticClass:"product__counter l-gap-r-sm"},[a("Counter",{attrs:{"size-lg":t.sizeLg},on:{"pass-counter":t.handleCounter}})],1),a("div",{staticClass:"product__add-cart l-gap-l-sm"},[a("button",{staticClass:"product__cart-btn button button--lg",on:{click:function(e){return e.preventDefault(),t.addToCart(e)}}},[a("font-awesome-icon",{attrs:{icon:["fas","cart-plus"]}}),t._v(" 加到購物車 ")],1)])])])])]):a("div",{staticClass:"product l-flex-col l-flex-center"},[a("div",{staticClass:"product__error err-page"},[a("div",{staticClass:"product__err-msg"},[t._v("找不到商品 QQ")]),a("div",{staticClass:"product_err-redirect err-page__redirect text-center"},[a("router-link",{staticClass:"err-page__btn",attrs:{to:"/products"}},[t._v("看看其他商品")])],1)])]),a("div",{staticClass:"product__carousel"},[a("h3",{staticClass:"product__title l-gap-l-sm"},[t._v(" "+t._s(t.productObj?"同類型商品":"熱銷商品")+" ")]),a("Carousel",{attrs:{"carousel-arr":t.carouselArr}})],1)])]),a("div",{staticClass:"main-container__line"})],1)},Mt=[],St=(a("a4d3"),a("e01a"),a("7db0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"counter"},[a("button",{staticClass:"counter__decrement button",class:{"button--lg":t.sizeLg,"button--disabled":1===t.count},attrs:{disabled:1===t.count},on:{click:function(e){return t.passCounter(-1,!0)}}},[a("font-awesome-icon",{attrs:{icon:["fas","minus"],size:"xs"}})],1),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.verifiedCounter,expression:"verifiedCounter",modifiers:{number:!0}}],staticClass:"counter__input input text-center",class:{" input--lg":t.sizeLg},attrs:{type:"text",min:1},domProps:{value:t.verifiedCounter},on:{change:function(e){return t.passCounter(t.count)},input:function(e){e.target.composing||(t.verifiedCounter=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("button",{staticClass:"counter__increment button",class:{"button--lg":t.sizeLg},on:{click:function(e){return t.passCounter(1,!0)}}},[a("font-awesome-icon",{attrs:{icon:["fas","plus"],size:"xs"}})],1)])}),Nt=[],Rt=(a("a9e3"),{name:"Counter",props:{sizeLg:Boolean,qty:Number,dataObj:Object},data:function(){return{count:this.qty||1}},watch:{qty:function(){this.count=this.qty}},methods:{passCounter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this;e?a.count+=t:a.count=t,a.count<1&&(a.count=1),a.dataObj?a.$emit("pass-counter",a.count,a.dataObj):a.$emit("pass-counter",a.count)}},computed:{verifiedCounter:{get:function(){return this.count},set:function(t){t&&"string"!==typeof t&&(this.count=t<1?1:t)}}}}),Et=Rt,It=Object(w["a"])(Et,St,Nt,!1,null,null,null),Ht=It.exports,Tt={name:"Product",components:{Counter:Ht,Carousel:pt},data:function(){return{productObj:{},productId:this.$route.params.productId,productsArr:[],tempCart:{},cartsArr:[],carouselArr:[],count:1,hasHero:!1,sizeLg:!0,isLoading:!1,errMsg:"出錯了QQ",errDetails:""}},watch:{"$route.params.productId":{handler:function(){var t=this,e=t.$route.params.productId;t.productId=e,t.productObj=t.productsArr.find((function(t){return t.id===e}))}}},methods:{getProduct:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,a.isLoading=!0,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/product/").concat(a.productId),e.prev=3,e.next=6,a.$http.get(s);case 6:r=e.sent,r.data.success||(a.errDetails=r.data.message),a.productObj=r.data.product,a.isLoading=!1,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](3),a.isLoading=!1,a.$bus.$emit("msg:push","".concat(a.errMsg,"：").concat(e.t0),"danger");case 16:case"end":return e.stop()}}),e,null,[[3,12]])})))()},handleCounter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this;e.count=t,e.count<1&&(e.count=1)},addToCart:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,s,r,n,o,i,c,l,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t,a.isLoading=!0,a.tempCart={product_id:a.productId,qty:a.count},s="danger",r="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/cart"),e.prev=5,n=a.cartsArr.findIndex((function(t){return t.product_id===a.productId})),-1!==n){e.next=17;break}return e.next=10,a.$http.post(r,{data:a.tempCart});case 10:o=e.sent,o.data.success&&(s="success"),a.getCarts(),a.isLoading=!1,a.$bus.$emit("msg:push",o.data.message,s),e.next=32;break;case 17:return i=a.cartsArr.find((function(t){return t.product_id===a.productId})).id,c="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/cart/").concat(i),l=a.cartsArr.find((function(t){return t.product_id===a.productId})).qty,a.tempCart.qty+=l,e.next=23,a.$http.delete(c);case 23:if(u=e.sent,!u.data.success){e.next=31;break}return e.next=27,a.$http.post(r,{data:a.tempCart});case 27:d=e.sent,d.data.success?(s="success",a.$bus.$emit("msg:push",d.data.message,s),a.getCarts()):a.$bus.$emit("msg:push","".concat(a.errMsg,"：updCarts Failed(add)"),s),e.next=32;break;case 31:a.$bus.$emit("msg:push","".concat(a.errMsg,"：updCarts Failed(rm)"),s);case 32:e.next=38;break;case 34:e.prev=34,e.t0=e["catch"](5),a.isLoading=!1,a.$bus.$emit("msg:push","".concat(a.errMsg,"：").concat(e.t0),s);case 38:case"end":return e.stop()}}),e,null,[[5,34]])})))()},getCarts:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,a.isLoading=!0,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/cart"),e.prev=3,e.next=6,a.$http.get(s);case 6:r=e.sent,a.cartsArr=r.data.data.carts,a.isLoading=!1,e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](3),a.isLoading=!1,a.$bus.$emit("msg:push","".concat(a.errMsg,"：").concat(e.t0),"danger");case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))()},getProducts:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,s,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,a.isLoading=!0,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/products/all"),e.prev=3,e.next=6,a.$http.get(s);case 6:r=e.sent,a.productsArr=r.data.products,n=Object(Ct["a"])(r.data.products),o=a.productObj?a.productObj.category:"hot",a.carouselArr=a.productObj?n.filter((function(t){return t.category===o&&t.id!==a.productId})):n.filter((function(t){return t.description===o})),a.isLoading=!1,e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](3),a.isLoading=!1,a.$bus.$emit("msg:push","".concat(a.errMsg,"：").concat(e.t0),"danger");case 18:case"end":return e.stop()}}),e,null,[[3,14]])})))()}},created:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getProduct();case 2:t.getProducts(),t.getCarts();case 4:case"end":return e.stop()}}),e)})))()},mounted:function(){this.$emit("pass-hashero",this.hasHero)}},Ft=Tt,Dt=Object(w["a"])(Ft,At,Mt,!1,null,null,null),Ut=Dt.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-container"},[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("main",{staticClass:"main-container__content"},[a("div",{staticClass:"main-container__inner"},[t.cartsArr.length?t._e():a("div",{staticClass:"carts l-flex-col l-flex-center"},[a("div",{staticClass:"carts__error"},[a("div",{staticClass:"carts__err-msg"},[t._v("購物車目前沒有商品")]),a("div",{staticClass:"carts__err-redirect text-center"},[a("router-link",{staticClass:"carts__err-btn",attrs:{to:"/products"}},[t._v("來去逛逛")])],1)])]),a("keep-alive",[a("transition",{attrs:{name:"fade"}},[t.cartsArr.length>0&&1===t.currentStep?a("CartList",{attrs:{"carts-arr":t.cartsArr,carts:t.carts},on:{"pass-counter":t.updCarts,"give-coupon":t.applyCoupon,"click-rmbtn":t.rmCarts,next:t.goNext}}):t._e(),2===t.currentStep?a("CheckoutForm",{on:{"submit-order":t.createOrder,back:t.goBack}}):t._e(),3===t.currentStep?a("PaidOrder",{attrs:{"order-id":t.orderId,carts:t.carts},on:{"loading-page":t.handleLoading}}):t._e()],1)],1),a("div",{staticClass:"product__carousel"},[a("h3",{staticClass:"product__title l-gap-l-sm"},[t._v("熱銷商品")]),a("Carousel",{attrs:{"carousel-arr":t.carouselArr}})],1)],1)]),a("div",{staticClass:"main-container__line"})],1)},zt=[],Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"carts"},[a("ul",{staticClass:"carts__list"},t._l(t.cartsArr,(function(e,s){return a("li",{key:"cartsArr["+s+"]",staticClass:"carts__item l-flex-row l-gap-md l-space-y-sm"},[a("figure",{staticClass:"carts__figure l-gap-x-sm"},[a("img",{staticClass:"carts__img",attrs:{src:e.product.imageUrl,alt:""}})]),a("figcaption",{staticClass:"carts__figcaption l-flex-col l-flex-center-expand l-gap-x-sm"},[a("div",{staticClass:"carts__details carts__details--primary l-flex-row l-flex-center-expand"},[a("h3",{staticClass:"carts__title"},[t._v(t._s(e.product.title))]),a("div",{staticClass:"carts__del"},[a("button",{staticClass:"carts__del-btn button pos-rel",on:{click:function(a){return a.preventDefault(),t.clickRmbtn(e.id)}}},[a("font-awesome-icon",{staticClass:"carts__del-icon",attrs:{icon:["fas","times"]}}),a("font-awesome-icon",{staticClass:"carts__del-icon carts__del-icon--scale pos-abs",attrs:{icon:["fas","times"]}})],1)])]),a("div",{staticClass:"carts__details carts__details--secondary l-flex-row l-flex-center-expand"},[a("div",{staticClass:"carts__counter"},[a("Counter",t._g({attrs:{"size-lg":t.sizeLg,qty:e.qty,"data-obj":e}},t.$listeners))],1),a("div",{staticClass:"carts__price text-right"},[a("div",{},[t._v(" "+t._s(t._f("currency")(e.product.price))+"/"+t._s(e.product.unit)+" ")]),a("div",{},[t._v("總計："+t._s(t._f("currency")(e.total)))])])])])])})),0),a("div",{staticClass:"carts__secondary-block l-gap-x-sm l-gap-t-md"},[a("div",{staticClass:"carts__secondary-block-inner"},[a("div",{staticClass:"carts__secondary-block-details l-flex-row l-flex-center-expand l-flex-text-align l-gap-b-sm"},[a("div",{staticClass:"carts__secondary-block-subtitle"},[t._v("商品總額")]),a("div",{staticClass:"carts__secondary-block-subtitle"},[t._v(" "+t._s(t._f("currency")(t.carts.total))+" ")])]),a("div",{staticClass:"carts__coupon-action l-flex-row l-gap-b-sm"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"input input--lg carts__coupon__input",attrs:{type:"text",placeholder:"輸入優惠券"},domProps:{value:t.couponCode},on:{input:function(e){e.target.composing||(t.couponCode=e.target.value)}}}),a("button",{staticClass:"button button--lg carts__coupon__btn",on:{click:function(e){return e.preventDefault(),t.giveCoupon(e)}}},[t._v(" 套用 ")])]),a("div",{staticClass:"carts__secondary-block-details l-flex-row l-flex-center-expand l-flex-text-align l-gap-b-sm"},[a("div",{staticClass:"carts__secondary-block-subtitle carts__secondary-block-subtitle--em"},[t._v(" 折扣 ")]),a("div",{staticClass:"carts__secondary-block-subtitle"},[t._v(" - "+t._s(t._f("currency")(t.carts.total-t.carts.final_total))+" ")])]),a("div",{staticClass:"carts__secondary-block-details l-flex-row l-flex-center-expand l-flex-text-align l-gap-b-sm"},[a("div",{staticClass:"carts__secondary-block-subtitle"},[t._v("應付金額")]),a("div",{staticClass:"carts__secondary-block-subtitle"},[t._v(" "+t._s(t._f("currency")(t.carts.final_total))+" ")])]),a("div",{staticClass:"carts__secondary-block-details"},[a("button",{staticClass:"button button--lg carts__btn",on:{click:function(e){return e.preventDefault(),t.next(e)}}},[t._v(" 結帳去 ")])])])])])},Qt=[],Vt={name:"CartList",components:{Counter:Ht},props:{cartsArr:Array,carts:Object},data:function(){return{couponCode:"",sizeLg:!1}},methods:{clickRmbtn:function(t){this.$emit("click-rmbtn",t)},giveCoupon:function(){var t=this;this.$emit("give-coupon",t.couponCode)},next:function(){this.$emit("next")}}},Bt=Vt,Wt=Object(w["a"])(Bt,Gt,Qt,!1,null,null,null),Jt=Wt.exports,Yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"carts"},[a("div",{staticClass:"carts__preview l-gap-x-sm l-space-b-md"},[a("a",{staticClass:"carts__preview__btn",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.back(e)}}},[a("font-awesome-icon",{attrs:{icon:["fas","chevron-left"]}}),a("span",{staticClass:"l-gap-l-sm"},[t._v("上一步")])],1)]),a("div",{staticClass:"carts__form l-flex-row l-flex-center-expand l-gap-x-sm"},[a("ValidationObserver",{staticClass:"carts__form__inner",attrs:{tag:"form"},on:{submit:function(e){return e.preventDefault(),t.submitOrder(e)}},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.invalid;return[a("ValidationProvider",{staticClass:"carts__form__block carts__form__block--name",attrs:{name:"姓名",rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.failed,r=e.errors;return[a("label",{staticClass:"carts__form__label",attrs:{for:"username"}},[t._v("姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"carts__form__input input input--lg",class:{"is-invalid":s},attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(e){e.target.composing||t.$set(t.form.user,"name",e.target.value)}}}),a("span",{staticClass:"text-disabled"},[t._v(t._s(r[0]))])]}}],null,!0)}),a("ValidationProvider",{staticClass:"carts__form__block carts__form__block--enail",attrs:{name:"電子信箱",rules:"required|email",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.failed,r=e.errors;return[a("label",{staticClass:"carts__form__label",attrs:{for:"useremail"}},[t._v("電子信箱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"carts__form__input input input--lg",class:{"is-invalid":s},attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入 Email",required:""},domProps:{value:t.form.user.email},on:{input:function(e){e.target.composing||t.$set(t.form.user,"email",e.target.value)}}}),a("span",{staticClass:"text-disabled"},[t._v(t._s(r[0]))])]}}],null,!0)}),a("ValidationProvider",{staticClass:"carts__form__block carts__form__block--tel",attrs:{name:"電話",rules:"required|numeric",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.failed,r=e.errors;return[a("label",{staticClass:"carts__form__label",attrs:{for:"usertel"}},[t._v("電話")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"carts__form__input input input--lg",class:{"is-invalid":s},attrs:{type:"tel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(e){e.target.composing||t.$set(t.form.user,"tel",e.target.value)}}}),a("span",{staticClass:"text-disabled"},[t._v(t._s(r[0]))])]}}],null,!0)}),a("ValidationProvider",{staticClass:"carts__form__block carts__form__block--addr",attrs:{name:"地址",rules:"required",tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.failed,r=e.errors;return[a("label",{staticClass:"carts__form__label",attrs:{for:"useraddress"}},[t._v("地址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"carts__form__input input input--lg",class:{"is-invalid":s},attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(e){e.target.composing||t.$set(t.form.user,"address",e.target.value)}}}),a("span",{staticClass:"text-disabled"},[t._v(t._s(r[0]))])]}}],null,!0)}),a("ValidationProvider",{staticClass:"form__block carts__form__block--comment",attrs:{tag:"div"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.errors;return[a("label",{staticClass:"carts__form__label",attrs:{for:"comment"}},[t._v("留言")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"carts__form__input input input--lg",attrs:{name:"comment",id:"comment"},domProps:{value:t.form.message},on:{input:function(e){e.target.composing||t.$set(t.form,"message",e.target.value)}}}),a("span",{staticClass:"text-disabled"},[t._v(t._s(s[0]))])]}}],null,!0)}),a("div",{staticClass:"carts__form__button carts__form__block--submit"},[a("button",{staticClass:"button button--lg",class:{"button--disabled":s},attrs:{disabled:s}},[t._v(" 送出訂單 ")])])]}}])})],1)])},Kt=[],Xt={name:"CheckoutForm",data:function(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{submitOrder:function(){this.$emit("submit-order",this.form)},back:function(){this.$emit("back")}}},Zt=Xt,te=Object(w["a"])(Zt,Yt,Kt,!1,null,null,null),ee=te.exports,ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"carts__order l-flex-row l-flex-center-expand"},[a("div",{staticClass:"carts__order__block l-gap-x-sm"},[a("h2",{staticClass:"carts__order__title text-center l-space-b-md"},[t._v("訂單明細")]),a("ul",{staticClass:"carts__order__list"},[t._l(t.carts.carts,(function(e,s){return a("li",{key:"cartsArr["+s+"]",staticClass:"carts__order__item l-flex-row l-flex-center-expand l-space-b-sm"},[a("figure",{staticClass:"carts__order__figure l-gap-r-sm"},[a("img",{staticClass:"carts__order__img",attrs:{src:e.product.imageUrl,alt:""}})]),a("figcaption",{staticClass:"carts__order__figcaption l-flex-col l-flex-center-expand l-gap-l-sm"},[a("h4",{staticClass:"carts__order__item-title"},[t._v(" "+t._s(e.product.title)+" ")]),a("div",{staticClass:"carts__order__item-price text-right"},[t._v(" "+t._s(t._f("currency")(e.total))+" ")]),a("div",{staticClass:"carts__order__item-qty text-right"},[t._v(" "+t._s(e.qty)+" "+t._s(e.product.unit)+" ")]),a("div",{staticClass:"carts__order__item-coupon text-right"},[t._v(" "+t._s(e.coupon?"已套用折扣碼「"+e.coupon.code+"」":"")+" ")])])])})),a("li",{staticClass:"carts__order__item l-flex-row l-flex-center-expand l-space-t-md"},[a("h4",{staticClass:"carts__order__item-title"},[t._v("折扣：")]),a("div",{staticClass:"carts__order__item-price text-right"},[t._v(" - "+t._s(t._f("currency")(t.carts.total-t.carts.final_total))+" ")])]),a("li",{staticClass:"carts__order__item l-flex-row l-flex-center-expand"},[a("h4",{staticClass:"carts__order__item-title"},[t._v("總計：")]),a("div",{staticClass:"carts__order__item-price text-right"},[t._v(" "+t._s(t._f("currency")(t.carts.total))+" ")])])],2)]),a("div",{staticClass:"carts__order__customer l-gap-x-sm"},[a("h2",{staticClass:"carts__order__title text-center l-space-b-md"},[t._v("買家資料")]),a("ul",{staticClass:"carts__customer__info"},[a("li",{staticClass:"carts__customer__item l-flex-row l-flex-center-expand"},[a("span",{staticClass:"carts__customer__text"},[t._v("姓名")]),a("span",{staticClass:"carts__customer__text"},[t._v(t._s(t.order.user.name))])]),a("li",{staticClass:"carts__customer__item l-flex-row l-flex-center-expand"},[a("span",{staticClass:"carts__customer__text"},[t._v("電子信箱")]),a("span",{staticClass:"carts__customer__text"},[t._v(t._s(t.order.user.email))])]),a("li",{staticClass:"carts__customer__item l-flex-row l-flex-center-expand"},[a("span",{staticClass:"carts__customer__text"},[t._v("電話")]),a("span",{staticClass:"carts__customer__text"},[t._v(t._s(t.order.user.tel))])]),a("li",{staticClass:"carts__customer__item l-flex-row l-flex-center-expand"},[a("span",{staticClass:"carts__customer__text"},[t._v("地址")]),a("span",{staticClass:"carts__customer__text"},[t._v(t._s(t.order.user.address))])]),a("li",{staticClass:"carts__customer__item l-flex-row l-flex-center-expand"},[a("span",{staticClass:"carts__customer__text"},[t._v("是否付款")]),a("span",{staticClass:"carts__customer__text"},[t._v(t._s(t.order.is_paid?"是":"否"))])]),a("li",{staticClass:"carts__customer__item"},[a("button",{staticClass:"button button--lg",on:{click:function(e){return e.preventDefault(),t.payOrder(e)}}},[t._v(" 確認付款 ")])])])])])},se=[],re={name:"PaidOrder",props:{orderId:String,carts:Object},data:function(){return{order:{user:{}}}},methods:{getOrder:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,e.prev=1,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/order/").concat(a.orderId),e.next=5,a.$http.get(s);case 5:r=e.sent,a.order=r.data.order,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),a.$bus.$emit("msg:push","".concat(a.errMsg,"：").concat(e.t0),"danger");case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},payOrder:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,s=!0,a.$emit("loading-page",s),e.prev=3,r="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/pay/").concat(a.orderId),e.next=7,a.$http.post(r);case 7:n=e.sent,n.data.success&&a.getOrder(),s=!1,a.$emit("loading-page",s),a.$bus.$emit("msg:push","".concat(n.data.message),"success"),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](3),a.isLoading=!1,a.$bus.$emit("msg:push","".concat(a.errMsg,"：").concat(e.t0),"danger");case 18:case"end":return e.stop()}}),e,null,[[3,14]])})))()}},created:function(){this.getOrder()}},ne=re,oe=Object(w["a"])(ne,ae,se,!1,null,null,null),ie=oe.exports,ce={name:"Carts",components:{CartList:Jt,CheckoutForm:ee,PaidOrder:ie,Carousel:pt},data:function(){return{carts:{},cartsArr:[],tempCart:{},carouselArr:[],couponCode:"",form:{user:{name:"",email:"",tel:"",address:""},message:""},currentStep:1,orderId:"",hasHero:!1,finalTotal:0,isLoading:!1,errMsg:"出錯了QQ",errDetails:""}},methods:{getCarts:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,a.isLoading=!0,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/cart"),e.prev=3,e.next=6,a.$http.get(s);case 6:r=e.sent,r.data.success||a.$bus.$emit("msg:push","".concat(a.errMsg,"：").concat(r.data.message||"再試一次"),"danger"),a.cartsArr=r.data.data.carts,a.carts=r.data.data,a.isLoading=!1,e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](3),a.isLoading=!1,a.$bus.$emit("msg:push","".concat(a.errMsg,"：").concat(e.t0),"danger");case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))()},rmCarts:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var s,r,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=e,s.isLoading=!0,r="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/cart/").concat(t),a.prev=3,n="success",a.next=7,s.$http.delete(r);case 7:o=a.sent,o.data.success||(n="danger"),s.getCarts(),s.isLoading=!1,s.$bus.$emit("msg:push",o.data.message||s.errMsg,n),a.next=18;break;case 14:a.prev=14,a.t0=a["catch"](3),s.isLoading=!1,s.$bus.$emit("msg:push","".concat(s.errMsg,"：").concat(a.t0),"danger");case 18:case"end":return a.stop()}}),a,null,[[3,14]])})))()},updCarts:function(t,e){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function s(){var r,n,o,i,c;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r=a,r.isLoading=!0,n="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/cart/").concat(e.id),o="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/cart"),r.tempCart={product_id:e.product_id,qty:t},s.prev=5,s.next=8,r.$http.delete(n);case 8:if(i=s.sent,!i.data.success){s.next=16;break}return s.next=12,r.$http.post(o,{data:r.tempCart});case 12:c=s.sent,c.data.success?(r.$bus.$emit("msg:push","修改數量成功","success"),r.getCarts()):r.$bus.$emit("msg:push","".concat(r.errMsg,"：updCarts Failed(add)"),"succedangerss"),s.next=17;break;case 16:r.$bus.$emit("msg:push","".concat(r.errMsg,"：updCarts Failed(rm)"),"danger");case 17:r.isLoading=!1,s.next=24;break;case 20:s.prev=20,s.t0=s["catch"](5),r.isLoading=!1,r.$bus.$emit("msg:push","".concat(r.errMsg,"：").concat(s.t0),"danger");case 24:case"end":return s.stop()}}),s,null,[[5,20]])})))()},applyCoupon:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var s,r,n,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=e,s.isLoading=!0,r={code:t},n="danger",a.prev=4,o="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/coupon"),a.next=8,s.$http.post(o,{data:r});case 8:i=a.sent,i.data.success&&(n="success"),s.getCarts(),s.isLoading=!1,s.$bus.$emit("msg:push","".concat(i.data.message),n),a.next=19;break;case 15:a.prev=15,a.t0=a["catch"](4),s.isLoading=!1,s.$bus.$emit("msg:push","".concat(s.errMsg,"：").concat(a.t0),n);case 19:case"end":return a.stop()}}),a,null,[[4,15]])})))()},createOrder:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var s,r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=e,s.form=t,a.prev=2,r="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/order"),a.next=6,s.$http.post(r,{data:t});case 6:n=a.sent,n.data.success?(s.orderId=n.data.orderId,s.goNext()):s.$bus.$emit("msg:push","".concat(n.data.message),"danger"),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](2),s.$bus.$emit("msg:push","".concat(s.errMsg,"：").concat(a.t0),"danger");case 13:case"end":return a.stop()}}),a,null,[[2,10]])})))()},goNext:function(){this.currentStep+=1},goBack:function(){this.currentStep-=1},getProducts:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,a.isLoading=!0,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/products/all"),e.prev=3,e.next=6,a.$http.get(s);case 6:r=e.sent,a.productsArr=r.data.products,n="hot",a.carouselArr=a.productsArr.filter((function(t){return t.description===n})),a.isLoading=!1,e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](3),a.isLoading=!1,a.$bus.$emit("msg:push","".concat(a.errMsg,"：").concat(e.t0),"danger");case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))()},handleLoading:function(t){this.isLoading=t}},created:function(){this.getCarts(),this.getProducts()},mounted:function(){this.$emit("pass-hashero",this.hasHero)}},le=ce,ue=Object(w["a"])(le,qt,zt,!1,null,null,null),de=ue.exports,pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form-container l-flex-col l-flex-center-expand"},[a("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.signIn(e)}}},[a("h1",{staticClass:"h3 mb-3 font-weight-normal text-center"},[t._v("登入")]),a("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("信箱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"Email address",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),a("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("密碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),a("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v(" 登入 ")]),a("p",{staticClass:"mt-5 mb-3 text-muted text-center"},[t._v("© 2020")])])])},_e=[],me={data:function(){return{user:{username:"",password:""}}},methods:{signIn:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,s="".concat("https://vue-course-api.hexschool.io","/admin/signin"),e.prev=2,e.next=5,a.$http.post(s,a.user);case 5:r=e.sent,r.data.success&&a.$router.push("/admin/products"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),a.$bus.$emit("msg:push","出錯了：".concat(e.t0),"danger");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()}}},ge=me,he=(a("03f5"),Object(w["a"])(ge,pe,_e,!1,null,"5abbda22",null)),fe=he.exports,ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Navbar"),a("AlertMsg"),a("div",{staticClass:"container-fluid mt-5"},[a("div",{staticClass:"row"},[a("Sidebar"),a("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 px-4",attrs:{role:"main"}},[a("router-view")],1)],1)])],1)},Ce=[],be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow"},[a("router-link",{staticClass:"navbar-brand col-sm-3 col-md-2 mr-0",attrs:{to:"/"}},[t._v(" IShouldGo ")]),a("ul",{staticClass:"navbar-nav px-3"},[a("li",{staticClass:"nav-item text-nowrap"},[a("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.signOut(e)}}},[t._v("登出")])])])],1)},xe=[],ye={name:"Navbar",methods:{signOut:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,s="".concat("https://vue-course-api.hexschool.io","/logout"),e.prev=2,e.next=5,a.$http.post(s);case 5:r=e.sent,r.data.success&&a.$router.push("/login"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),a.$bus.$emit("msg:push","出錯了：".concat(e.t0),"danger");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()}}},we=ye,ke=Object(w["a"])(we,be,xe,!1,null,null,null),$e=ke.exports,Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"col-md-2 d-none d-md-block bg-light sidebar"},[a("div",{staticClass:"sidebar-sticky"},[t._m(0),a("ul",{staticClass:"nav flex-column"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/admin/products"}},[a("i",{staticClass:"fas fa-box-open"}),t._v(" 產品列表 ")]),a("router-link",{staticClass:"nav-link",attrs:{to:"/admin/orders"}},[a("i",{staticClass:"fas fa-box-open"}),t._v(" 訂單列表 ")]),a("router-link",{staticClass:"nav-link",attrs:{to:"/admin/coupons"}},[a("i",{staticClass:"fas fa-box-open"}),t._v(" 優惠券 ")])],1)])])])},Oe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[a("span",[t._v("後臺管理")]),a("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#"}},[a("span",{attrs:{"data-feather":"plus-circle"}})])])}],je={name:"Sidebar",data:function(){return{}}},Le=je,Ae=Object(w["a"])(Le,Pe,Oe,!1,null,null,null),Me=Ae.exports,Se={components:{Navbar:$e,Sidebar:Me,AlertMsg:V}},Ne=Se,Re=Object(w["a"])(Ne,ve,Ce,!1,null,null,null),Ee=Re.exports,Ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"text-right my-4"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.openModal(!0)}}},[t._v(" 新增商品 ")])]),a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.productsArr,(function(e){return a("tr",{key:e.id},[a("td",{domProps:{textContent:t._s(e.category)}}),a("td",{domProps:{textContent:t._s(e.title)}}),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.origin_price)))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(e.price)))]),a("td",[1===e.is_enabled?a("span",[t._v("啟用")]):a("span",[t._v("未啟用")])]),a("td",[a("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Basic example"}},[a("button",{staticClass:"btn btn-outline-warning",attrs:{type:"button"},on:{click:function(a){return t.openModal(!1,e)}}},[t._v(" 編輯 ")]),a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.delConfirm(e)}}},[t._v(" 刪除 ")])])])])})),0)]),a("Page",{attrs:{"page-obj":t.pagination},on:{"change-page":t.getProducts}}),a("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(1),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.imageUrl,expression:"tempProduct.imageUrl"}],staticClass:"form-control",attrs:{type:"text",id:"image",placeholder:"請輸入圖片連結"},domProps:{value:t.tempProduct.imageUrl},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"imageUrl",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"customFile"}},[t._v(" 或 上傳圖片 "),t.status.fileUploading?a("i",{staticClass:"fas fa-spinner fa-pulse"}):t._e()]),a("input",{ref:"files",staticClass:"form-control",attrs:{type:"file",id:"customFile"},on:{change:t.uploadFile}})]),a("img",{staticClass:"img-fluid",attrs:{img:"https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=828346ed697837ce808cae68d3ddc3cf&auto=format&fit=crop&w=1350&q=80",src:t.tempProduct.imageUrl,alt:""}})]),a("div",{staticClass:"col-sm-8"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"title"}},[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempProduct.title},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"title",e.target.value)}}})]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"category"}},[t._v("分類")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempProduct.category},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"category",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"price"}},[t._v("數量")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.verifiedNum,expression:"verifiedNum",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",id:"num",min:t.numMin,placeholder:"請輸入數量"},domProps:{value:t.verifiedNum},on:{input:function(e){e.target.composing||(t.verifiedNum=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"form-group col-md-3"},[a("label",{attrs:{for:"price"}},[t._v("單位")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"}],staticClass:"form-control",attrs:{type:"text",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.tempProduct.unit},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"unit",e.target.value)}}})])]),a("div",{staticClass:"form-row"},[a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"origin_price"}},[t._v("原價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.tempProduct.origin_price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"origin_price",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6"},[a("label",{attrs:{for:"price"}},[t._v("售價")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入售價"},domProps:{value:t.tempProduct.price},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"price",e.target.value)}}})])]),a("hr"),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"content"}},[t._v("商品內容")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"}],staticClass:"form-control",attrs:{type:"text",id:"content",placeholder:"請輸入商品內容"},domProps:{value:t.tempProduct.content},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"content",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v("商品細節")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.description,expression:"tempProduct.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:"請輸入商品細節"},domProps:{value:t.tempProduct.description},on:{input:function(e){e.target.composing||t.$set(t.tempProduct,"description",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.is_enabled,expression:"tempProduct.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempProduct.is_enabled)?t._i(t.tempProduct.is_enabled,null)>-1:t._q(t.tempProduct.is_enabled,1)},on:{change:function(e){var a=t.tempProduct.is_enabled,s=e.target,r=s.checked?1:0;if(Array.isArray(a)){var n=null,o=t._i(a,n);s.checked?o<0&&t.$set(t.tempProduct,"is_enabled",a.concat([n])):o>-1&&t.$set(t.tempProduct,"is_enabled",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.tempProduct,"is_enabled",r)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.resetImg}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updProduct}},[t._v(" 確認 ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"delProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(2),a("div",{staticClass:"modal-body"},[t._v(" 是否刪除 "),a("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempProduct.title))]),t._v(" 商品(刪除後將無法恢復)。 ")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.delProduct}},[t._v(" 確認刪除 ")])])])])])],1)},He=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("分類")]),a("th",{attrs:{scope:"col"}},[t._v("名稱")]),a("th",{attrs:{scope:"col"}},[t._v("原價")]),a("th",{attrs:{scope:"col"}},[t._v("售價")]),a("th",{attrs:{scope:"col"}},[t._v("是否啟用")]),a("th",{attrs:{scope:"col"}},[t._v("操作")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("新增產品")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-danger text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("刪除產品")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],Te=a("5530"),Fe=a("1157"),De=a.n(Fe),Ue={name:"ProductsAdmin",components:{Page:$t},data:function(){return{productsArr:[],tempProduct:{num:1},isNew:!1,pagination:{},isLoading:!1,status:{fileUploading:!1},errMsg:"出錯了QQ",numMin:1}},methods:{getProducts:function(){var t=arguments,e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var s,r,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:1,r=e,r.isLoading=!0,n="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/admin/products?page=").concat(s),a.prev=4,a.next=7,r.$http.get(n);case 7:o=a.sent,r.productsArr=o.data.products,r.pagination=o.data.pagination,r.isLoading=!1,a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](4),r.isLoading=!1,r.$bus.$emit("msg:push","".concat(r.errMsg,"：").concat(a.t0),"danger");case 17:case"end":return a.stop()}}),a,null,[[4,13]])})))()},openModal:function(t,e){var a=this;a.tempProduct=t?{}:Object(Te["a"])({},e),a.isNew=t,De()("#productModal").modal("show")},closeModal:function(){De()("#productModal").modal("hide")},updProduct:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,s,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,a.isLoading=!0,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/admin/product"),r="post",a.isNew||(s="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/admin/product/").concat(a.tempProduct.id),r="put"),e.prev=5,e.next=8,a.$http[r](s,{data:a.tempProduct});case 8:n=e.sent,o="success",n.data.success||(o="danger"),a.isLoading=!1,a.$bus.$emit("msg:push",n.data.message,o),e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](5),a.isLoading=!1,a.$bus.$emit("msg:push","".concat(a.errMsg,"：").concat(e.t0),"danger");case 19:a.closeModal(),a.resetImg(),a.getProducts();case 22:case"end":return e.stop()}}),e,null,[[5,15]])})))()},delConfirm:function(t){var e=this;e.tempProduct=Object(Te["a"])({},t),De()("#delProductModal").modal("show")},closeConfirm:function(){De()("#delProductModal").modal("hide")},delProduct:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,a.isLoading=!0,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/admin/product/").concat(a.tempProduct.id),e.prev=3,e.next=6,a.$http.delete(s);case 6:r=e.sent,n="success",r.data.success||(n="danger"),a.isLoading=!1,a.$bus.$emit("msg:push",r.data.message,n),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](3),a.isLoading=!1,a.$bus.$emit("msg:push","".concat(a.errMsg,"：").concat(e.t0),"danger");case 17:a.closeConfirm(),a.getProducts();case 19:case"end":return e.stop()}}),e,null,[[3,13]])})))()},uploadFile:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,s,r,n,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,a.status.fileUploading=!0,s=a.$refs.files.files[0],r=new FormData,r.append("file-to-update",s),n="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/admin/upload"),e.prev=6,e.next=9,a.$http.post(n,r,{headers:{"Content-Type":"multipart/form-data"}});case 9:o=e.sent,i="danger",c=o.data.message,o.data.success&&(i="success",c="圖片上傳成功",a.$set(a.tempProduct,"imageUrl",o.data.imageUrl)),a.status.fileUploading=!1,a.$bus.$emit("msg:push",c,i),e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](6),a.status.fileUploading=!1,a.$bus.$emit("msg:push","".concat(a.errMsg,"：").concat(e.t0),"danger");case 21:case"end":return e.stop()}}),e,null,[[6,17]])})))()},resetImg:function(){var t=this;t.$refs.files.value=null}},computed:{verifiedNum:{get:function(){return this.tempProduct.num},set:function(t){t&&"string"!==typeof t&&t>=this.numMin&&(this.tempProduct.num=t)}}},created:function(){this.getProducts()}},qe=Ue,ze=Object(w["a"])(qe,Ie,He,!1,null,null,null),Ge=ze.exports,Qe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("table",{staticClass:"table mt-4"},[t._m(0),a("tbody",t._l(t.ordersArr,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(t._f("formatDate")(e.create_at)))]),a("td",[t._v(t._s(e.user.email))]),a("td",[t._v(t._s(e.total))]),a("td",[t._v(t._s(e.is_paid?"是":"否"))]),e.is_paid?a("td",[t._v(t._s(t._f("formatDate")(e.paid_date)))]):a("td",[t._v("尚未付款")])])})),0)]),a("Page",{attrs:{"page-obj":t.pagination},on:{"change-page":t.getOrders}})],1)},Ve=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("訂單成立時間")]),a("th",{attrs:{scope:"col"}},[t._v("Email")]),a("th",{attrs:{scope:"col"}},[t._v("應付金額")]),a("th",{attrs:{scope:"col"}},[t._v("是否付款")]),a("th",{attrs:{scope:"col"}},[t._v("付款時間")])])])}],Be={name:"",components:{Page:$t},data:function(){return{ordersArr:[],pagination:{},isLoading:!1,errMsg:"出錯了QQ"}},methods:{getOrders:function(){var t=arguments,e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var s,r,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:1,r=e,r.isLoading=!0,n="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/admin/orders?page=").concat(s),a.prev=4,a.next=7,r.$http.get(n);case 7:o=a.sent,r.ordersArr=o.data.orders,r.pagination=o.data.pagination,r.isLoading=!1,a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](4),r.isLoading=!1,r.$bus.$emit("msg:push","".concat(r.errMsg,"：").concat(a.t0),"danger");case 17:case"end":return a.stop()}}),a,null,[[4,13]])})))()}},created:function(){this.getOrders()}},We=Be,Je=Object(w["a"])(We,Qe,Ve,!1,null,null,null),Ye=Je.exports,Ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"text-right my-4"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.openModal(!0)}}},[t._v(" 新增優惠券 ")])]),a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.couponsArr,(function(e){return a("tr",{key:e.id},[a("td",[t._v(t._s(e.title))]),a("td",[t._v(t._s(e.percent))]),a("td",[t._v(t._s(t._f("formatDate")(e.due_date)))]),a("td",[t._v(t._s(e.is_enabled?"是":"否"))]),a("td",[a("button",{staticClass:"btn btn-outline-warning",attrs:{type:"button"},on:{click:function(a){return t.openModal(!1,e)}}},[t._v(" 編輯 ")]),a("button",{staticClass:"btn btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.delConfirm(e)}}},[t._v(" 刪除 ")])])])})),0)]),a("Page",{attrs:{"page-obj":t.pagination},on:{"change-page":t.getCoupons}}),a("div",{staticClass:"modal fade",attrs:{id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(" "+t._s(t.isNew?"新增":"編輯")+"優惠券 ")]),t._m(1)]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"coupon_title"}},[t._v("標題")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"}],staticClass:"form-control",attrs:{type:"text",id:"coupon_title",placeholder:"請輸入標題"},domProps:{value:t.tempCoupon.title},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"title",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"coupon_code"}},[t._v("優惠碼")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.code,expression:"tempCoupon.code"}],staticClass:"form-control",attrs:{type:"text",id:"coupon_code",placeholder:"請輸入優惠碼"},domProps:{value:t.tempCoupon.code},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"code",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"coupon_due_date"}},[t._v("到期日")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.due_date,expression:"tempCoupon.due_date"}],staticClass:"form-control",attrs:{type:"date",id:"coupon_due_date",placeholder:"請輸入到期日"},domProps:{value:t.tempCoupon.due_date},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"due_date",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"coupon_percent"}},[t._v("折扣百分比")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"}],staticClass:"form-control",attrs:{type:"text",id:"coupon_percent",placeholder:"請輸入折扣百分比"},domProps:{value:t.tempCoupon.percent},on:{input:function(e){e.target.composing||t.$set(t.tempCoupon,"percent",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.is_enabled,expression:"tempCoupon.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempCoupon.is_enabled)?t._i(t.tempCoupon.is_enabled,null)>-1:t._q(t.tempCoupon.is_enabled,1)},on:{change:function(e){var a=t.tempCoupon.is_enabled,s=e.target,r=s.checked?1:0;if(Array.isArray(a)){var n=null,o=t._i(a,n);s.checked?o<0&&t.$set(t.tempCoupon,"is_enabled",a.concat([n])):o>-1&&t.$set(t.tempCoupon,"is_enabled",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.tempCoupon,"is_enabled",r)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updCoupon}},[t._v(" "+t._s(t.isNew?"新增":"更新")+"優惠券 ")])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"delCouponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content border-0"},[t._m(2),a("div",{staticClass:"modal-body"},[t._v(" 是否刪除 "),a("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempCoupon.title))]),t._v(" 優惠券(刪除後將無法恢復)。 ")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.delCoupon}},[t._v(" 確認刪除 ")])])])])])],1)},Xe=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("名稱")]),a("th",{attrs:{scope:"col"}},[t._v("折扣百分比")]),a("th",{attrs:{scope:"col"}},[t._v("到期日")]),a("th",{attrs:{scope:"col"}},[t._v("是否啟用")]),a("th",{attrs:{scope:"col"}},[t._v("操作")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header bg-danger text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a("span",[t._v("刪除優惠券")])]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],Ze={name:"couponsAdmin",components:{Page:$t},data:function(){return{couponsArr:[],tempCoupon:{},postCoupon:{},pagination:{},isNew:!1,isLoading:!1,errMsg:"出錯了QQ"}},methods:{getCoupons:function(){var t=arguments,e=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var s,r,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s=t.length>0&&void 0!==t[0]?t[0]:1,r=e,r.isLoading=!0,n="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/admin/coupons?page=").concat(s),a.prev=4,a.next=7,r.$http.get(n);case 7:o=a.sent,r.couponsArr=o.data.coupons,r.pagination=o.data.pagination,r.isLoading=!1,a.next=17;break;case 13:a.prev=13,a.t0=a["catch"](4),r.isLoading=!1,r.$bus.$emit("msg:push","".concat(r.errMsg,"：").concat(a.t0),"danger");case 17:case"end":return a.stop()}}),a,null,[[4,13]])})))()},openModal:function(t,e){var a=this;a.tempCoupon=t?{}:Object(Te["a"])({},e),a.tempCoupon.due_date&&"number"===typeof a.tempCoupon.due_date&&(a.tempCoupon.due_date=a.$root.$options.filters.formatDate(a.tempCoupon.due_date)),a.isNew=t,De()("#couponModal").modal("show")},closeModal:function(){De()("#couponModal").modal("hide")},updCoupon:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,s,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,a.isLoading=!0,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/admin/coupon"),r="post",a.isNew||(s="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/admin/coupon/").concat(a.tempCoupon.id),r="put"),e.prev=5,n="success",a.convertToUnix(a.tempCoupon.due_date),e.next=10,a.$http[r](s,{data:a.postCoupon});case 10:o=e.sent,o.data.success||(n="danger"),a.isLoading=!1,a.$bus.$emit("msg:push",o.data.message,n),e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](5),a.isLoading=!1,a.$bus.$emit("msg:push","".concat(a.errMsg,"：").concat(e.t0),"danger");case 20:a.closeModal(),a.getCoupons();case 22:case"end":return e.stop()}}),e,null,[[5,16]])})))()},delConfirm:function(t){var e=this;e.tempCoupon=Object(Te["a"])({},t),De()("#delCouponModal").modal("show")},closeConfirm:function(){De()("#delCouponModal").modal("hide")},delCoupon:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,s,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,a.isLoading=!0,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("yyhurs391","/admin/coupon/").concat(a.tempCoupon.id),e.prev=3,e.next=6,a.$http.delete(s);case 6:r=e.sent,n="success",r.data.success||(n="danger"),a.isLoading=!1,a.$bus.$emit("msg:push",r.data.message,n),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](3),a.isLoading=!1,a.$bus.$emit("msg:push","".concat(a.errMsg,"：").concat(e.t0),"danger");case 17:a.closeConfirm(),a.getCoupons();case 19:case"end":return e.stop()}}),e,null,[[3,13]])})))()},convertToUnix:function(t){var e=this,a=new Date("".concat(t)).getTime()/1e3;e.postCoupon=Object(Te["a"])(Object(Te["a"])({},e.tempCoupon),{},{due_date:a})}},created:function(){this.getCoupons()}},ta=Ze,ea=Object(w["a"])(ta,Ke,Xe,!1,null,null,null),aa=ea.exports;r["default"].use(P["a"]);var sa=[{path:"/",name:"",component:Y,children:[{path:"",name:"Home",component:ht,meta:{title:"IShouldGo｜愛蔬購"}},{path:"products",name:"Products",component:Lt,meta:{title:"商品列表"}},{path:"product/:productId",name:"Product",component:Ut,meta:{title:"商品詳情"}},{path:"carts",name:"Carts",component:de,meta:{title:"購物車"}}]},{path:"/login",name:"Login",component:fe,meta:{title:"後臺管理"}},{path:"/admin",name:"DashboardAdmin",component:Ee,children:[{path:"products",name:"ProductsAdmin",component:Ge,meta:{requiresAuth:!0,title:"商品列表"}},{path:"orders",name:"OrdersAdmin",component:Ye,meta:{requiresAuth:!0,title:"訂單列表"}},{path:"coupons",name:"CouponsAdmin",component:aa,meta:{requiresAuth:!0,title:"優惠券列表"}}]}],ra=new P["a"]({routes:sa}),na=ra;r["default"].prototype.$bus=new r["default"];a("b680"),a("5319");var oa=function(t){var e=Number(t);return"$".concat(e.toFixed(0).replace(/./g,(function(t,e,a){var s=e&&"."!==t&&(a.length-e)%3===0?", ".concat(t).replace(/\s/g,""):t;return s})))},ia=function(t){var e=Number(t),a=new Date(1e3*e),s=a.getFullYear(),r=a.getMonth()+1;1==="".concat(r).length&&(r="0".concat(r));var n=a.getDate(),o="".concat(s,"-").concat(r,"-").concat(n);return o};g["c"].add(h["a"],f["a"]),Object.keys(_).forEach((function(t){Object(p["c"])(t,_[t])})),Object(p["d"])("zh_TW",m),r["default"].config.productionTip=!1,r["default"].use(l.a,i.a),i.a.defaults.withCredentials=!0,r["default"].use(n["a"]),r["default"].component("Loading",d.a),r["default"].component("font-awesome-icon",v["a"]),r["default"].component("ValidationObserver",p["a"]),r["default"].component("ValidationProvider",p["b"]),r["default"].filter("currency",oa),r["default"].filter("formatDate",ia),new r["default"]({router:na,render:function(t){return t($)}}).$mount("#app"),na.beforeEach(function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e,a,s){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.meta.title&&(document.title=e.meta.title),!e.meta.requiresAuth){t.next=9;break}return r="".concat("https://vue-course-api.hexschool.io","/api/user/check"),t.next=5,i.a.post(r);case 5:n=t.sent,n.data.success?s():s({path:"/login"}),t.next=10;break;case 9:s();case 10:case"end":return t.stop()}}),t)})));return function(e,a,s){return t.apply(this,arguments)}}())},"5c0b":function(t,e,a){"use strict";var s=a("9c0c"),r=a.n(s);r.a},"70d4":function(t,e,a){},"9c0c":function(t,e,a){},e005:function(t,e,a){"use strict";var s=a("2938"),r=a.n(s);r.a}});
//# sourceMappingURL=app.46b86dab.js.map